
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  
  <!-- [ì¶”ê°€ë¨] ë§í¬ ê³µìœ  ì‹œ ë³´ì—¬ì§ˆ ë¯¸ë¦¬ë³´ê¸° ì •ë³´ -->
  <title>í‹° í…Œë¼í”¼ (Tea Therapy)</title>
  <meta property="og:title" content="í‹° í…Œë¼í”¼ (Tea Therapy)" />
  <meta property="og:description" content="ë‚˜ì˜ ìƒíƒœì— ë”± ë§ëŠ” ì•½ì„ ì°¨ë¥¼ ì¶”ì²œë°›ì•„ë³´ì„¸ìš”." />
  <meta property="og:image" content="https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?q=80&w=1200&auto=format&fit=crop" />

  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&family=Pretendard:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
  <div class="wrap">
    <div class="card" id="app">
      <header>
        <div class="header-left">
          <h1 id="pageTitle">í‹° í…Œë¼í”¼ (Tea Therapy)</h1>
          <div class="sub" id="pageSub">ì˜¤ëŠ˜ì˜ ë‚˜ì—ê²Œ í•„ìš”í•œ ì°¨ë¥¼ ê³¨ë¼ë³´ì„¸ìš”.</div>
        </div>
        <div class="header-right">
             <!-- í™ˆìœ¼ë¡œ ê°€ê¸° -->
             <button class="icon-btn" onclick="location.href='index.html'">ğŸ </button>
             <!-- ê³µìœ  ë²„íŠ¼ -->
             <button class="icon-btn" onclick="openShareModal()" aria-label="ê³µìœ í•˜ê¸°">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="18" cy="5" r="3"></circle>
                  <circle cx="6" cy="12" r="3"></circle>
                  <circle cx="18" cy="19" r="3"></circle>
                  <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                  <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                </svg>
             </button>
        </div>
      </header>
      
      <div style="margin-bottom:10px;"><div class="pill" id="stepPill">Tea</div></div>
      <div class="bar"><div id="barFill"></div></div>

      <main id="mainContent"></main>

      <div class="footer">
        <div>Â© ìì—°í™˜ê²½í•´ì„¤ì‚¬ ì •ì£¼í¬</div>
        <div>* ì˜í•™ì  ì§„ë‹¨ì´ ì•„ë‹Œ ì·¨í–¥/ì»¨ë””ì…˜ ê¸°ë°˜ ì¶”ì²œì…ë‹ˆë‹¤.</div>
      </div>
    </div>
  </div>

  <!-- ê³µìœ  ëª¨ë‹¬ì°½ -->
  <div id="shareModal" class="modal-overlay hidden" onclick="closeShareModal(event)">
    <div class="modal-box" onclick="event.stopPropagation()">
      <h3>QRì½”ë“œ ê³µìœ </h3>
      <img id="qrImage" src="" alt="QR Code" class="qr-img">
      <input type="text" id="shareUrlInput" class="url-input" readonly>
      <div style="display:flex; gap:8px;">
        <button class="btn primary" style="flex:1" onclick="copyShareUrl()">ì£¼ì†Œ ë³µì‚¬</button>
        <button class="btn" style="flex:1" onclick="closeShareModal()">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

<script>
(() => {
  const ICONS = {
    yakseon: `<svg viewBox="0 0 24 24" fill="none" stroke="#d68c00" stroke-width="1.5"><path d="M12 3v18m-9-9h18" stroke="currentColor"/><circle cx="12" cy="12" r="5" fill="rgba(214,140,0,0.1)"/></svg>`, 
    herb: `<svg viewBox="0 0 24 24" fill="none" stroke="#4caf50" stroke-width="1.5"><path d="M12 22s8-10 8-16a8 8 0 0 0-16 0c0 6 8 16 8 16z"/><path d="M12 6v8"/></svg>`, 
    green: `<svg viewBox="0 0 24 24" fill="none" stroke="#2e7d32" stroke-width="1.5"><path d="M2 22h20M12 2v20M5 10c0-4 3-8 7-8s7 4 7 8v12H5V10z"/></svg>`,
  };

  const TEA_TYPES = {
    warm:   { name: "ë”°ëœ»ìˆœí™˜ì°¨", example: "ìƒê°•ì°¨(ë˜ëŠ” ìƒê°•+ëŒ€ì¶”)", pitch: "í¬ê·¼í•˜ê²Œ ê°ì‹¸ì£¼ëŠ” í•œ ì”ì´ í•„ìš”í•´ìš”.", tags:["ë”°ëœ»í•¨","ì†ë°œì°¨ê°€ì›€","í¬ê·¼"], },
    cool:   { name: "ë§‘ì€ì¿¨ë§ì°¨", example: "êµ­í™”ì°¨(ë˜ëŠ” ë°•í•˜)", pitch: "ë¨¸ë¦¬ê¹Œì§€ ë§‘ì•„ì§€ëŠ” ìƒì¾Œí•¨ì´ í•„ìš”í•´ìš”.", tags:["ìƒì¾Œ","ë‘í†µ","ë¦¬ì…‹"], },
    digest: { name: "ì†Œí™”í¸ì•ˆì°¨", example: "ë³´ë¦¬ì°¨(ë˜ëŠ” ì§„í”¼)", pitch: "ì†ì„ í¸ì•ˆí•˜ê²Œ ë¹„ìš°ê³  ì‹¶ì–´ìš”.", tags:["êµ¬ìˆ˜í•¨","ë”ë¶€ë£©","ì†Œí™”"], },
    calm:   { name: "ê¸´ì¥ì™„í™”ì°¨", example: "ëŒ€ì¶”ì°¨", pitch: "ë§ˆìŒì„ ì°¨ë¶„í•˜ê²Œ ë‚®ì¶°ë³´ì„¸ìš”.", tags:["ì•ˆì •","ë¶ˆë©´","íœ´ì‹"], },
    energy: { name: "ê¸°ë ¥ì¶©ì „ì°¨", example: "ì¸ì‚¼ì°¨(ë˜ëŠ” ìŒí™”)", pitch: "ë°©ì „ëœ ì—ë„ˆì§€, ì¶©ì „ì´ í•„ìš”í•´ìš”.", tags:["ì—ë„ˆì§€","ì§€ì¹¨","í™œë ¥"], },
    water:  { name: "ìˆ˜ë¶„ì •ë¦¬ì°¨", example: "ì˜¥ìˆ˜ìˆ˜ìˆ˜ì—¼ì°¨", pitch: "ê°€ë³ê²Œ ëª¸ì„ ì •ëˆí•˜ê³  ì‹¶ì–´ìš”.", tags:["ë¶“ê¸°","ê°€ë²¼ì›€","ë°°ì¶œ"], },
    five:   { name: "ì˜¤ë¯¸ìì°¨", example: "ì˜¤ë¯¸ìì°¨", pitch: "ë‹¤ì„¯ê°€ì§€ ë§›ìœ¼ë¡œ ë¦¬ë“¬ì„ ë˜ì°¾ìœ¼ì„¸ìš”.", tags:["ìƒˆì½¤ë‹¬ì½¤","ê°ˆì¦","ê· í˜•"], }
  };

  const TEA_QUESTIONS = [
    { q: "Q1. ì§€ê¸ˆ ë‚´ ëª¸ì˜ â€œì˜¨ë„ ê°ê°â€ì€?", a: [{t:"ì†ë°œì´ ì°¨ê³  ë”°ëœ»í•œ ê²Œ ì¢‹ë‹¤",s:{warm:2,energy:1}}, {t:"ë”ìœ„ë¥¼ íƒ€ê³  ì‹œì›í•œ ê²Œ ì¢‹ë‹¤",s:{cool:2}}, {t:"ê·¸ë•Œê·¸ë•Œ ë‹¤ë¥´ë‹¤",s:{digest:1,calm:1}}, {t:"ì˜ ëª¨ë¥´ê² ë‹¤",s:{}}] },
    { q: "Q2. ìš”ì¦˜ ê°€ì¥ ë¶ˆí¸í•œ ì ì€?", a: [{t:"ì†ì´ ë”ë¶€ë£©/ê°€ìŠ¤",s:{digest:2}}, {t:"ëª©ë§ˆë¦„/ê±´ì¡°í•¨",s:{five:2}}, {t:"ëª¸ì´ ë¶“ê³  ë¬´ê±°ì›€",s:{water:2}}, {t:"ë”±íˆ ì—†ìŒ/ê¸°ë¶„ì „í™˜",s:{cool:1,calm:1}}] },
    { q: "Q3. ìŠ¤íŠ¸ë ˆìŠ¤ ì •ë„ëŠ”?", a: [{t:"ì˜ˆë¯¼í•˜ê³  ë¨¸ë¦¬ê°€ ë³µì¡",s:{calm:2}}, {t:"ì¶• ì²˜ì§€ê³  ê¸°ìš´ ì—†ìŒ",s:{energy:2}}, {t:"ìŠ¤íŠ¸ë ˆìŠ¤ ì ìŒ",s:{digest:1}}, {t:"ê°ì • ê¸°ë³µì´ ì‹¬í•¨",s:{five:1,calm:1}}] },
    { q: "Q4. ì ì€ ì˜ ì£¼ë¬´ì‹œë‚˜ìš”?", a: [{t:"ì ë“¤ê¸° í˜ë“¦",s:{calm:2}}, {t:"ìì£¼ ê¹¨ê±°ë‚˜ ê°œìš´ì¹˜ ì•ŠìŒ",s:{energy:1,calm:1}}, {t:"ì˜ ìëŠ” í¸",s:{cool:1}}, {t:"ìˆ˜ë©´ì‹œê°„ ë¶ˆê·œì¹™",s:{five:1}}] },
    { q: "Q5. ìŒì‹ ë¨¹ì€ í›„ ë°˜ì‘ì€?", a: [{t:"ê¸°ë¦„ì§„ ê²ƒ ë¨¹ìœ¼ë©´ ë¶€ë‹´",s:{digest:2}}, {t:"ë§¤ìš´/ëœ¨ê±°ìš´ ê²ƒ ë¨¹ìœ¼ë©´ í™• ë‹¬ì•„ì˜¤ë¦„",s:{cool:2}}, {t:"ì°¬ ê²ƒ ë¨¹ìœ¼ë©´ ë°° ì•„í””",s:{warm:2}}, {t:"ìƒê´€ ì—†ìŒ",s:{}}] },
    { q: "Q6. ì˜¤ëŠ˜ ë°”ë¼ëŠ” ì°¨ì˜ ì—­í• ì€?", a: [{t:"ë”°ëœ»í•˜ê²Œ ìœ„ë¡œë°›ê¸°",s:{warm:2}}, {t:"ìƒì¾Œí•˜ê²Œ ë¦¬ì…‹",s:{cool:2}}, {t:"ì† í¸í•˜ê²Œ",s:{digest:2}}, {t:"ë§ˆìŒì˜ ì•ˆì •",s:{calm:2}}] },
    { q: "Q7. ì„ í˜¸í•˜ëŠ” í–¥/ë§›ì€?", a: [{t:"ì•Œì‹¸í•œ í–¥(ìƒê°•/ê³„í”¼)",s:{warm:2}}, {t:"í–¥ê¸‹í•œ ê½ƒ/í—ˆë¸Œí–¥",s:{cool:2}}, {t:"êµ¬ìˆ˜í•œ ê³¡ë¬¼ë§›",s:{digest:2}}, {t:"ìƒˆì½¤ë‹¬ì½¤í•œ ë§›",s:{five:2}}] },
    { q: "Q8. í‰ì†Œ ë¬¼ ì„­ì·¨ëŸ‰ì€?", a: [{t:"ì˜ ì•ˆ ë§ˆì‹¬",s:{five:1,water:1}}, {t:"ë§ì´ ë§ˆì…”ë„ ê°ˆì¦ ë‚¨",s:{five:2}}, {t:"ë³´í†µ",s:{}}, {t:"ì§  ìŒì‹ ë¨¹ìœ¼ë©´ ì˜ ë¶€ìŒ",s:{water:2}}] },
    { q: "Q9. í˜„ì¬ ì—ë„ˆì§€ ìƒíƒœëŠ”?", a: [{t:"ë°°í„°ë¦¬ 10% (ì§€ì¹¨)",s:{energy:2,calm:1}}, {t:"í‰ë²”í•¨",s:{digest:1}}, {t:"ê³¼ì—´/í¥ë¶„ ìƒíƒœ",s:{cool:2}}, {t:"ë“¤ì­‰ë‚ ì­‰í•¨",s:{five:1}}] },
  ];

  const state = {
    view: 'menu',
    quizStep: 0,
    quizPicks: [],
    isProcessing: false
  };

  const mainContent = document.getElementById("mainContent");
  const pageTitle = document.getElementById("pageTitle");
  const pageSub = document.getElementById("pageSub");
  const stepPill = document.getElementById("stepPill");
  const barFill = document.getElementById("barFill");

  function render() {
    barFill.style.width = '0%';
    state.isProcessing = false;

    if (state.view === 'menu') {
      setTitle("í‹° í…Œë¼í”¼ (Tea Therapy)", "ì›í•˜ëŠ” ì°¨ ë©”ë‰´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.", "Tea");
      mainContent.innerHTML = `
        <div class="tea-grid">
          <button class="tea-btn" onclick="startQuiz()">
            ${ICONS.yakseon}
            <span>ì•½ì„ ì°¨<br><span class="tiny">(ì¶”ì²œë°›ê¸°)</span></span>
          </button>
          <button class="tea-btn" onclick="alert('í—ˆë¸Œì°¨ ì •ë³´ëŠ” ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.')">
            ${ICONS.herb}
            <span>í—ˆë¸Œì°¨</span>
          </button>
          <button class="tea-btn" onclick="alert('ë…¹ì°¨ ì •ë³´ëŠ” ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.')">
            ${ICONS.green}
            <span>ë…¹ì°¨</span>
          </button>
        </div>
        <button class="wide-btn" onclick="alert('í‹° ë¸”ëœë”© ë ˆì‹œí”¼ëŠ” ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.')">
          <span>ğŸµ í‹° ë¸”ëœë”© ë ˆì‹œí”¼ ë³´ê¸°</span>
          <span>OPEN ></span>
        </button>
        <div class="nav">
          <button class="btn" onclick="location.href='index.html'">â† í™ˆìœ¼ë¡œ</button>
        </div>
      `;
    } 
    else if (state.view === 'quiz_tea') { renderQuiz(); }
  }

  function startQuiz() {
    state.view = 'quiz_tea';
    state.quizStep = 0;
    state.quizPicks = Array(TEA_QUESTIONS.length).fill(null);
    render();
  }
  window.startQuiz = startQuiz;

  function renderQuiz() {
    const progress = (state.quizStep / TEA_QUESTIONS.length) * 100;
    barFill.style.width = `${progress}%`;
    if (state.quizStep >= TEA_QUESTIONS.length) { renderResult(); return; }
    const q = TEA_QUESTIONS[state.quizStep];
    const picked = state.quizPicks[state.quizStep];
    setTitle("ì•½ì„ ì°¨ ì¶”ì²œ", "ë‚˜ì˜ ìƒíƒœë¥¼ ì²´í¬í•´ë³´ì„¸ìš”.", `${state.quizStep+1} / ${TEA_QUESTIONS.length}`);
    mainContent.innerHTML = `
      <h2 class="q-title">${q.q}</h2>
      <div class="choices">${q.a.map((ans, idx) => `<button class="choice" onclick="pickAnswer(${idx})" aria-pressed="${picked===idx}">${ans.t}</button>`).join("")}</div>
      <div class="nav"><button class="btn" onclick="prevStep()" ${state.quizStep===0 ? 'disabled':''}>ì´ì „</button><button class="btn danger" onclick="setView('menu')">ì·¨ì†Œ</button></div>`;
  }

  window.pickAnswer = (idx) => { state.quizPicks[state.quizStep] = idx; if (state.quizStep < TEA_QUESTIONS.length) { state.quizStep++; render(); } };
  window.prevStep = () => { if (state.quizStep > 0) { state.quizStep--; render(); } };

  function renderResult() {
    const finalScores = {};
    Object.keys(TEA_TYPES).forEach(k => finalScores[k] = 0);
    state.quizPicks.forEach((pidx, qidx) => {
      if (pidx === null) return;
      const scores = TEA_QUESTIONS[qidx].a[pidx].s;
      for (const [k, v] of Object.entries(scores)) finalScores[k] += v;
    });
    const ranking = Object.entries(finalScores).sort((a,b) => b[1]-a[1]);
    const topKey = ranking[0][0];
    const topType = TEA_TYPES[topKey];
    setTitle("ê²°ê³¼ í™•ì¸", "ì˜¤ëŠ˜ ë‹¹ì‹ ì—ê²Œ ê°€ì¥ í•„ìš”í•œ ì°¨ëŠ”?", "ì™„ë£Œ");
    barFill.style.width = '100%';
    mainContent.innerHTML = `
      <section class="result">
        <div class="box" style="text-align:center; padding:30px 20px;">
          <div style="font-size:14px; color:#2f8a58; font-weight:700; margin-bottom:10px;">ì˜¤ëŠ˜ì˜ ì¶”ì²œ ì•½ì„ ì°¨</div>
          <h2 style="font-size:26px; margin:0 0 10px; color:#000;">${topType.name}</h2>
          <div style="color:#333; font-weight:600; font-size:16px; margin-bottom:12px;">${topType.example}</div>
          <p style="color:#555; line-height:1.6;">"${topType.pitch}"</p>
          <div style="margin-top:20px">${topType.tags.map(t => `<span class="tag">#${t}</span>`).join("")}</div>
        </div>
        <div class="box">
          <div class="tiny">ê²°ê³¼ í™œìš©í•˜ê¸°</div>
          <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;">
            <button class="btn capture" onclick="captureResult('app', '${topType.name}_ê²°ê³¼')">ğŸ“· ì´ë¯¸ì§€ ì €ì¥</button>
            <button class="btn primary" onclick="shareResult('${topKey}', '${topType.name}')">ê²°ê³¼ ê³µìœ </button>
            <button class="btn" onclick="startQuiz()">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸</button>
            <button class="btn" onclick="setView('menu')">ë©”ë‰´ë¡œ</button>
          </div>
        </div>
      </section>
    `;
  }

  window.setView = (viewName) => { state.view = viewName; render(); };
  function setTitle(title, sub, pill) { pageTitle.textContent = title; pageSub.textContent = sub; stepPill.textContent = pill; }
  window.captureResult = (elementId, fileName) => {
    const element = document.getElementById(elementId);
    alert("ì´ë¯¸ì§€ë¥¼ ìƒì„± ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...");
    html2canvas(element, { backgroundColor: "#ffffff", scale: 2 }).then(canvas => {
        const link = document.createElement('a'); link.download = fileName + '.png'; link.href = canvas.toDataURL(); link.click();
    }).catch(err => { alert("ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."); });
  };
  
  render();
})();

const REAL_URL = "https://wngml090256-sudo.github.io/wngml090256.github.io/tea.html";
window.openShareModal = async () => {
  const title = document.title;
  
  // HTML ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
  const input = document.getElementById('shareUrlInput');
  const qr = document.getElementById('qrImage');
  const modal = document.getElementById('shareModal');
  
  // ëª¨ë‹¬ ë‚´ìš© ë¯¸ë¦¬ ì±„ì›Œë‘ê¸° (PCìš©)
  if(input) input.value = REAL_URL;
  if(qr) qr.src = `https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=${encodeURIComponent(REAL_URL)}`;
  
  // 1. ëª¨ë°”ì¼(ê³µìœ  ê¸°ëŠ¥ ì§€ì›)ì¸ ê²½ìš°
  if (navigator.share) { 
      try { 
          // ëª¨ë°”ì¼ ìì²´ ê³µìœ ì°½ ë„ìš°ê¸°
          await navigator.share({ title: title, text: 'ë‚˜ì—ê²Œ ë§ëŠ” ìì—°ì˜ í–¥ê¸°ì™€ ì°¨ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.', url: REAL_URL }); 
      } catch (e) {
          // ì‚¬ìš©ìê°€ ì·¨ì†Œí•´ë„ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ (ì¡°ìš©íˆ ì¢…ë£Œ)
      }
      return; // â˜…í•µì‹¬â˜… ëª¨ë°”ì¼ì´ë©´ ì—¬ê¸°ì„œ ë¬´ì¡°ê±´ ëëƒ…ë‹ˆë‹¤. ë°‘ìœ¼ë¡œ ì•ˆ ë‚´ë ¤ê°!
  } 
  
  // 2. PC(ê³µìœ  ê¸°ëŠ¥ ë¯¸ì§€ì›)ì¸ ê²½ìš°ì—ë§Œ ëª¨ë‹¬ì°½ ë„ìš°ê¸°
  if(modal) modal.classList.remove('hidden'); 
};
</script>
</body>
</html>
